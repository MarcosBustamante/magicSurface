{% extends 'base/base.html' %}

{% block title %}
    Documentação
{% endblock title %}

{% block css %}
    <link rel="stylesheet" href="/static/css/global.css" />
    <link rel="stylesheet" href="/static/css/colors.css" />
    <link rel="stylesheet" href="/static/lib/highlight/styles/darkula.css">
    <style>
        pre {
            border: 0;
            background-color: rgba(0,0,0,0);
        }
    </style>
{% endblock css %}

{% block js %}
    <script src="/static/lib/download.js"></script>
    <script src="/static/lib/highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
{% endblock js %}

{% block body %}
    <div class="row con">
        <div class="col-md-2 fixed">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <p><a href="#download">Download</a></p>
                    <p><a href="#dependencia">Dependência</a></p>
                    <p><a href="#configuration">Configuração</a></p>

                    <p><a href="#layers" ng-click="show = 'layer'">LayerApi</a></p>
                    <p ng-if="show == 'layer'">&nbsp&nbsp<a href="#layerSave">LayerApi.save()</a></p>
                    <p ng-if="show == 'layer'">&nbsp&nbsp<a href="#layerList">LayerApi.list()</a></p>
                    <p ng-if="show == 'layer'">&nbsp&nbsp<a href="#layerGet">LayerApi.get()</a></p>
                    <p ng-if="show == 'layer'">&nbsp&nbsp<a href="#layerDelete">LayerApi.delete()</a></p>

                    <p><a href="#files" ng-click="show = 'file'">FileApi</a></p>
                    <p ng-if="show == 'file'">&nbsp&nbsp<a href="#fileSave">FileApi.save()</a></p>
                    <p ng-if="show == 'file'">&nbsp&nbsp<a href="#fileList">FileApi.list()</a></p>
                    <p ng-if="show == 'file'">&nbsp&nbsp<a href="#fileGet">FileApi.get()</a></p>
                    <p ng-if="show == 'file'">&nbsp&nbsp<a href="#fileDelete">FileApi.delete()</a></p>
                </div>
            </div>
        </div>
        <div class="col-md-10 scrollit">

            <!-- MagicSurfaceJs-->
            <div id="download" class="panel panel-default">
                <div class="panel-heading">
                    <div class="text-center">
                        <h1 class="red font-initial">Download</h1>
                        <div>
                            <p class="text-justify margi-35-0">
                                Para uma manipulação mais simples da api você pode fazer o download do magicSurface.js, um modulo angularJs
                                que disponibilizamos. Com ele podemo fazer todas as chamadas disponíveis para a api, onde ja tem como responsabilidade
                                efetuar diversas validações de dados com o intuito de proporcionar uma resposta mais rápida.
                            </p>
                            <p>
                                <a onclick="downloadFile('/static/magicSurface.min.js')" class="btn btn-primary">Download</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dependencia-->
            <div id="dependencia" class="panel panel-default">
                <div class="panel-heading">
                    <div class="text-center">
                        <h1 class="red font-initial">Dependência</h1>
                        <div class="text-justify margi-35-0">
                            <p>
                                Após fazer o download do arquivo magicSurface.min.js, temos que inporta-lo após o nosso arquivo angular.
                                Se você ainda não possui a framework angularJs, faça o download dele <a href="https://angularjs.org/" target="_blank">clicando aqui</a>
                            </p>
                            <p>
                                Agora, temos que importar os dois arquivos js no nosso html
                            </p>

                            <pre>
                                <code class="xml hljs">
&ltscript src="/static/path/angular.min.js"&gt;&lt/script&gt
&ltscript src="/static/path/magicSurface.min.js"&gt;&lt/script&gt
                                </code>
                            </pre>

                            <p>
                                Com ambos arquivos importados, podemos criar nossa modulo angular e colocar o magicSurface como dependência:
                            </p>

                            <pre>
                                <code class="javascript hljs">
angular.module('myApp', ['magicSurface']);
                                </code>
                            </pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Configuração-->
            <div id="configuration" class="panel panel-default">
                <div class="panel-heading">
                    <div class="text-center">
                        <h1 class="red font-initial">Configuração</h1>
                        <div class="text-justify margi-35-0">
                            <p>
                                Para autenticar as informações que estão sendo salvas e consultadas na api, temos que passar sempre o
                                token de nossa app e o username do dono da app. Se tais informações não forem passadas, não será possível
                                efetuar nenhuma operação na api.
                            </p>
                            <p>
                                Se você não sabe essas informações, <a href="/myApps"> clique aqui </a> para consulta-las.
                            </p>
                            <pre>
                                <code class="javascript hljs">
angular.module('myApp').controller('myCtrl', function(MagicSurface){

    var token = 'hdfashdfjadsfhakdshfkasdhf';
    var username = 'meuUsername';

    MagicSurface.configApp(
        token,
        username
    );
});
                                </code>
                            </pre>
                        </div>
                    </div>
                </div>
            </div>




            <!-- Layers-->
            <div id="layers" class="panel panel-default">
                <div class="panel-heading">
                    <div class="text-center">
                        <h1 class="red font-initial">LayerApi</h1>
                        <div class="text-justify margi-35-0">
                            <p>
                                Layer é um serviço existente no magicSurface, responsável em salvar pequenas áreas em nosso mapa,
                                cada layer tem a responsabilidade de salvar diversas informações de realidade aumentada na área salva,
                                tais informações podem ser imagens, videos, etc...
                            </p>
                            <p>
                                Há quatro tipos de métodos que podemos chamar utilizando o serviço LayerApi:
                            </p>
                            <div class="row">
                                <a class="col-md-offset-4 col-md-1 btn btn-primary" href="#layerSave">Save</a>
                                <a class=" col-md-1 btn btn-primary" href="#layerList">List</a>
                                <a class=" col-md-1 btn btn-primary" href="#layerGet">Get</a>
                                <a class=" col-md-1 btn btn-primary" href="#layerDelete">Delete</a>
                            </div>
                        </div>


                        <!-- Layer Save-->
                        <div id="layerSave" class="panel panel-warning">
                            <div class="panel-heading">
                                <h3 class="red font-initial">LayerApi.save()</h3>
                                <div class="text-justify margi-35-0">
                                    <p>
                                        O LayerApi.save() pode exercer duas funções, a de salvar e atualizar um layer existente,
                                        para que ele salve ou atualize um layer, alguns parametros tem que ser passados obrigatóriamente
                                        enquanto outros são opcionais (codigo abaixo).
                                    </p>
                                    <p>
                                        O que diferencia se esta função fará o papel de save ou update é o parâmetro id, onde o um layer id
                                        válido tem que ser passado.
                                    </p>
                                    <pre>
                                        <code class="javascript hljs">
angular.module('myApp').controller('myCtrl', function(LayerApi){
    // O que estiver entre [] são parâmetros opcionais
    var params = {
        name: 'string',
        latitude: 'float',
        longitude: 'float',
        [radius: 'float'] // o padrão é 20m
        [id: 'integer']
    }

    var promise = LayerApi.save(params);
    promise.success(function(result){
        // função que deve chamar caso haja sucesso
    });
    promise.error(function(result){
        // função que deve chamar caso haja erro
    });
    promise.finally(function(result){
        // função que deve chamar quando terminar o processo
    });
});
                                        </code>
                                    </pre>
                                </div>
                            </div>
                        </div>

                        <!-- Layer List-->
                        <div id="layerList" class="panel panel-warning">
                            <div class="panel-heading">
                                <h3 class="red font-initial">LayerApi.list()</h3>
                                <div class="text-justify margi-35-0">
                                    <p>
                                        O LayerApi.list() nos traz a possibilidade de listar todos os layers pertencentes ao token do app passado,
                                        podemos passar como parâmetro diversos filtros e opções, sendo todos opcionais. caso algum filtro ou opçao
                                        nao for passado o resultado sera retornado sem estar filtrado ou sem as informações complementares.
                                    </p>
                                    <p>
                                        Tabela com todos os filtros e opções que podemos usar, utilizar um que não esteja listado irá causar erro.
                                        <table class="table table-bordered">
                                            <tr>
                                                <th>tipo</th><th> chave </th><th> descrição </th>
                                            </tr>
                                            <tr>
                                                <td> filters </td>
                                                <td> deleted </td>
                                                <td>
                                                    <p>True = Retorna todos os layers deletados</p>
                                                    <p>False = Retorna todos os layers não deletados</p>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td> options </td>
                                                <td> include_files </td>
                                                <td>
                                                    <p> 'image' = inclui todas as imagens dos layers listados</p>
                                                    <p> 'video' = inclui todos os videos dos layers listados</p>
                                                    <p> 'all' = inclui todos os arquivos dos layers listados</p>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td> options </td>
                                                <td> file_deleted </td>
                                                <td>
                                                    <p>True = Filtra os arquivos deletados selecionados com o options 'include_files'</p>
                                                    <p>False = Filtra os arquivos não deletados selecionados com o options 'include_files'</p>
                                                </td>
                                            </tr>
                                        </table>
                                    </p>
                                    <pre>
                                        <code class="javascript hljs">
angular.module('myApp').controller('myCtrl', function(LayerApi){
    // Todos os parâmetros do list são opcionais,
    var params = {
        filters : {
            deleted: 'boolean'
        },
        options : {
            include_files: 'string'
            file_deleted: 'boolean'
        }
    }

    // É possivel chamar o list sem parâmetro nenhum: LayerApi.list();
    var promise = LayerApi.list(params);
    promise.success(function(result){
        // função que deve chamar caso haja sucesso
    });
    promise.error(function(result){
        // função que deve chamar caso haja erro
    });
    promise.finally(function(result){
        // função que deve chamar quando terminar o processo
    });
});
                                        </code>
                                    </pre>
                                </div>
                            </div>
                        </div>

                        <!-- Layer Get-->
                        <div id="layerGet" class="panel panel-warning">
                            <div class="panel-heading">
                                <h3 class="red font-initial">LayerApi.get()</h3>
                                <div class="text-justify margi-35-0">
                                    <p>
                                        LayerApi.get() nos permite que dado um layerId válido, a api retorne um objeto javascript de informações
                                        sobre o layer. Com o get também temos a possibilidade de filtrar e passar opções.
                                    </p>
                                    <p>
                                        Tabela com todos os filtros e opções que podemos usar, utilizar um que não esteja listado irá causar erro.
                                        <table class="table table-bordered">
                                            <tr>
                                                <th>tipo</th><th> chave </th><th> descrição </th>
                                            </tr>
                                            <tr>
                                                <td> options </td>
                                                <td> include_files </td>
                                                <td>
                                                    <p> 'image' = inclui todas as imagens dos layers listados</p>
                                                    <p> 'video' = inclui todos os videos dos layers listados</p>
                                                    <p> 'all' = inclui todos os arquivos dos layers listados</p>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td> options </td>
                                                <td> file_deleted </td>
                                                <td>
                                                    <p>True = Filtra os arquivos deletados selecionados com o options 'include_files'</p>
                                                    <p>False = Filtra os arquivos não deletados selecionados com o options 'include_files'</p>
                                                </td>
                                            </tr>
                                        </table>
                                    </p>
                                    <pre>
                                        <code class="javascript hljs">
angular.module('myApp').controller('myCtrl', function(LayerApi){
    var form = {
        layerId: 'integer',
        options: {
            include_files: 'string',
            file_deleted: 'boolean'
        }
    }

    var promise = LayerApi.get(form);
    promise.success(function(result){
        // função que deve chamar caso haja sucesso
    });
    promise.error(function(result){
        // função que deve chamar caso haja erro
    });
    promise.finally(function(result){
        // função que deve chamar quando terminar o processo
    });
});
                                        </code>
                                    </pre>
                                </div>
                            </div>
                        </div>

                        <!-- Layer Delete-->
                        <div id="layerDelete" class="panel panel-warning">
                            <div class="panel-heading">
                                <h3 class="red font-initial">LayerApi.del()</h3>
                                <div class="text-justify margi-35-0">
                                    <p>
                                        LayerApi.del() nos permite que dado um layerId válido, este seja deletado via soft-delete.
                                        É retornado um objeto com o layer deletado. Ao fetuar um delete, podemos passar uma opção
                                        dizendo para o sistema realizar um soft-delete cascade, deletando todos os dados com referências
                                        dos layers.
                                    </p>
                                    <pre>
                                        <code class="javascript hljs">
angular.module('myApp').controller('myCtrl', function(LayerApi){
    var form = {
        layerId: 'integer',
        options: {
            delete_cascade: 'boolean'
        }
    }

    var promise = LayerApi.del(form);
    promise.success(function(result){
        // função que deve chamar caso haja sucesso
    });
    promise.error(function(result){
        // função que deve chamar caso haja erro
    });
    promise.finally(function(result){
        // função que deve chamar quando terminar o processo
    });
});
                                        </code>
                                    </pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Layers-->



            <!-- Files -->
            <div id="files" class="panel panel-default">
                <div class="panel-heading">
                    <div class="text-center">
                        <h1 class="red font-initial">FileApi</h1>
                        <div class="text-justify margi-35-0">
                            <p>
                                FileApi é um serviço existente no magicSurface, responsável em salvar arquivos relacionados
                                a layers existentes no nosso mapa, onde esses arquivos podem ser imagens (png, jpg) ou videos
                                (mp4).
                            </p>
                            <p>
                                Há quatro tipos de métodos que podemos chamar utilizando o serviço FileApi:
                            </p>
                            <div class="row">
                                <a class="col-md-offset-4 col-md-1 btn btn-primary" href="#layerSave">Save</a>
                                <a class=" col-md-1 btn btn-primary" href="#layerList">List</a>
                                <a class=" col-md-1 btn btn-primary" href="#layerGet">Get</a>
                                <a class=" col-md-1 btn btn-primary" href="#layerDelete">Delete</a>
                            </div>
                        </div>


                        <!-- File Save-->
                        <div id="fileSave" class="panel panel-warning">
                            <div class="panel-heading">
                                <h3 class="red font-initial">FileApi.save()</h3>
                                <div class="text-justify margi-35-0">
                                    <p>
                                        O FileApi.save() é a função responsável em salvar nos arquivos no layer, ele obrigatóriamente
                                        recebe dois parâmetros. O primeiro é o file, o arquivo selecionado através do input["file"].
                                        O segundo é o layerId, que identifica a qual layer que o arquivo esta relacionado.
                                    </p>
                                    <pre>
                                        <code class="javascript hljs">
angular.module('myApp').controller('myCtrl', function(FileApi){
    var layerId = 'integer'
    var file = 'File()'

    var promise = FileApi.save(file, layerId);
    promise.success(function(result){
        // função que deve chamar caso haja sucesso
    });
    promise.error(function(result){
        // função que deve chamar caso haja erro
    });
    promise.finally(function(result){
        // função que deve chamar quando terminar o processo
    });
});
                                        </code>
                                    </pre>
                                </div>
                            </div>
                        </div>

                        <!-- File List-->
                        <div id="fileList" class="panel panel-warning">
                            <div class="panel-heading">
                                <h3 class="red font-initial">FileApi.list()</h3>
                                <div class="text-justify margi-35-0">
                                    <p>
                                        O FileApi.list() nos traz a possibilidade de listar todos os arquivos pertencentes
                                        a um layer, podemos passar como parâmetro diversos filtros e opções, sendo todos
                                        opcionais. caso algum filtro ou opçao nao for passado o resultado sera retornado
                                        sem ser filtrado ou as informações complementares.
                                    </p>
                                    <p>
                                        Tabela com todos os filtros e opções que podemos usar, utilizar um que não esteja listado irá causar erro.
                                        <table class="table table-bordered">
                                            <tr>
                                                <th>tipo</th><th> chave </th><th> descrição </th>
                                            </tr>
                                            <tr>
                                                <td> filters </td>
                                                <td> deleted </td>
                                                <td>
                                                    <p>True = Retorna todos os layers deletados</p>
                                                    <p>False = Retorna todos os layers não deletados</p>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td> filters </td>
                                                <td> file </td>
                                                <td>
                                                    <p> 'image' = inclui todas as imagens dos layers listados</p>
                                                    <p> 'video' = inclui todos os videos dos layers listados</p>
                                                    <p> 'all' = inclui todos os arquivos dos layers listados</p>
                                                </td>
                                            </tr>
                                        </table>
                                    </p>
                                    <pre>
                                        <code class="javascript hljs">
angular.module('myApp').controller('myCtrl', function(FileApi){
    // Todos os filtros do list são opcionais,
    var form = {
        layerId: 'integer',
        filters : {
            file: 'string',
            deleted: 'boolean'
        }
    }

    var promise = FileApi.list(form);
    promise.success(function(result){
        // função que deve chamar caso haja sucesso
    });
    promise.error(function(result){
        // função que deve chamar caso haja erro
    });
    promise.finally(function(result){
        // função que deve chamar quando terminar o processo
    });
});
                                        </code>
                                    </pre>
                                </div>
                            </div>
                        </div>

                        <!-- File Get-->
                        <div id="fileGet" class="panel panel-warning">
                            <div class="panel-heading">
                                <h3 class="red font-initial">FileApi.get()</h3>
                                <div class="text-justify margi-35-0">
                                    <p>
                                        FileApi.get() nos permite que dado um FileId válido, a api retorne um objeto
                                        javascript de informações sobre o arquivos.
                                    </p>
                                    <pre>
                                        <code class="javascript hljs">
angular.module('myApp').controller('myCtrl', function(FileApi){
    var fileId = 'integer';

    var promise = FileApi.get(fileId);
    promise.success(function(result){
        // função que deve chamar caso haja sucesso
    });
    promise.error(function(result){
        // função que deve chamar caso haja erro
    });
    promise.finally(function(result){
        // função que deve chamar quando terminar o processo
    });
});
                                        </code>
                                    </pre>
                                </div>
                            </div>
                        </div>

                        <!-- File Delete-->
                        <div id="fileDelete" class="panel panel-warning">
                            <div class="panel-heading">
                                <h3 class="red font-initial">FileApi.del()</h3>
                                <div class="text-justify margi-35-0">
                                    <p>
                                        FileApi.del() nos permite que dado um fileId válido, este seja deletado via soft-delete.
                                        É retornado um objeto com o file deletado.
                                    </p>
                                    <pre>
                                        <code class="javascript hljs">
angular.module('myApp').controller('myCtrl', function(FileApi){
    var fileId = 'integer';

    var promise = FileApi.del(fileId);
    promise.success(function(result){
        // função que deve chamar caso haja sucesso
    });
    promise.error(function(result){
        // função que deve chamar caso haja erro
    });
    promise.finally(function(result){
        // função que deve chamar quando terminar o processo
    });
});
                                        </code>
                                    </pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Files -->



        </div>
    </div>
{% endblock body %}